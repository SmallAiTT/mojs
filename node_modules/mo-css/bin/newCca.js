#!/usr/bin/env node

var exec = require("child_process").exec;
var path = require("path");
var readline = require("readline");
var moCcs = require("../index.js");

var iface = readline.createInterface({
    input : process.stdin,
    output : process.stdout
});
function prompt(){
    iface.question("ccaName: ", function(ccaName){
        var dir = process.cwd();
        if(moCcs.newCca(dir, ccaName)){
            exec("start " + path.join(dir, ccaName, "cca.xml.animation"), function(err){
                if(err) console.error(err);
                iface.close();
            });
        }else{
            prompt();
        }
    });
}
prompt();